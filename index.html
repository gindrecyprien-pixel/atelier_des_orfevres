<script>
    const objets = {
        "Klein_5943": { valeur: "3MV", description: "Une sculpture miniature célèbre." },
        "Gondole_2776": { valeur: "2MV", description: "Petit objet en forme de gondole." },
        "Mobius_1756": { valeur: "4MV", description: "Anneau de Möbius miniature." },
        "Grenade_2952": { valeur: "5MV", description: "Réplique décorative d'une grenade." },
        "Hibou_1959": { valeur: "1MV", description: "Petit hibou en céramique." },
        "XXX_3076": { valeur: "10MV", description: "Objet mystérieux à collectionner." },
        "XXX_1502": { valeur: "10MV", description: "Objet mystérieux à collectionner." },
        "XXX_2202": { valeur: "10MV", description: "Objet mystérieux à collectionner." },
        "XXX_3895": { valeur: "10MV", description: "Objet mystérieux à collectionner." },
        "Collier_8960": { valeur: null, description: "Collier légendaire, unique et précieux." }
    };

    function valider() {
        const orfevre = document.getElementById('orfèvreCode').value;
        const code = document.getElementById('codeInput').value;
        const valeurInput = document.getElementById('valeurInput');
        const valeurLabel = document.getElementById('valeurLabel');
        const resultat = document.getElementById('resultat');

        if (!objets.hasOwnProperty(code)) {
            resultat.innerHTML = "L'objet n'est pas répertorié.";
            return;
        }

        /* ===========================
           ESTIMATION RÉELLE
        ============================ */
        if (orfevre === "estimationreel") {

            valeurLabel.style.display = "none";
            valeurInput.style.display = "none";

            if (code === "Collier_8960") {
                resultat.innerHTML =
                    `L'objet "Collier_8960" a une valeur inestimable !\n\n` +
                    `<span class="description">${objets[code].description}</span>`;
            } else {
                resultat.innerHTML =
                    `L'objet "${code}" vaut ${objets[code].valeur}\n\n` +
                    `<span class="description">${objets[code].description}</span>`;
            }

            document.getElementById('orfèvreCode').value = '';
            return;
        }

        /* ===========================
           FAUSSE ESTIMATION
        ============================ */
        if (orfevre === "fausseestimation") {

            // EXCEPTION ABSOLUE POUR LE COLLIER
            if (code === "Collier_8960") {
                resultat.innerHTML =
                    "C’est une honte absolue de chercher à tromper des citoyens honnêtes sur une pièce aussi unique. " +
                    "Une telle pratique est inacceptable et profondément choquante.";
                valeurLabel.style.display = "none";
                valeurInput.style.display = "none";
                document.getElementById('orfèvreCode').value = '';
                return;
            }

            valeurLabel.style.display = "block";
            valeurInput.style.display = "block";

            const valeur = valeurInput.value.trim();
            if (!valeur) {
                resultat.innerHTML = "Veuillez entrer une valeur souhaitée.";
                return;
            }

            resultat.innerHTML =
                `L'objet "${code}" vaut ${valeur}MV\n\n` +
                `<span class="description">${objets[code].description}</span>`;

            valeurInput.value = '';
            valeurLabel.style.display = "none";
            valeurInput.style.display = "none";
            document.getElementById('orfèvreCode').value = '';
            return;
        }

        /* ===========================
           CODE ORFÈVRE INVALIDE
        ============================ */
        valeurLabel.style.display = "none";
        valeurInput.style.display = "none";
        resultat.innerHTML = "Code de l'orfèvre invalide.";
    }
</script>
